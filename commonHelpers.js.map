{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport './css/loading.css';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const searchForm = document.querySelector('.form');\n  const searchBar = document.getElementById('search-bar');\n  const submitBtn = document.querySelector('.submit-btn');\n  const gallery = document.getElementById('gallery');\n  const loading = document.querySelector('.loading');\n\n  searchForm.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    const searchQuery = searchBar.value.trim();\n\n    if (!searchQuery) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please enter a search query.',\n      });\n      return;\n    }\n\n    loading.style.display = 'block';\n\n    const apiKey = '42199698-86ec1f577e997e517f326ea6b';\n    const url = `https://pixabay.com/api/?key=${apiKey}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${limit}`;\n\n    try {\n      const response = await axios.get(url);\n      const data = response.data;\n\n      loading.style.display = 'none';\n      if (data.hits.length === 0) {\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        gallery.innerHTML = '';\n      } else {\n        gallery.innerHTML = '';\n        data.hits.forEach(image => {\n          const card = document.createElement('div');\n          card.className = 'card';\n          card.innerHTML = `\n    <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\"/>\n    </a>\n    <div class=\"card-info\">\n      <h3 class=\"img-desc\">${image.tags}</h3>\n      <div class=\"img-info\">\n      <p class=\"img-stat\">Likes:<br>${image.likes}</p>\n      <p class=\"img-stat\">Views:<br>${image.views}</p>\n      <p class=\"img-stat\">Comments:<br>${image.comments}</p>\n      <p class=\"img-stat\">Downloads:<br>${image.downloads}</p>\n      </div>\n              </div>\n   `;\n          gallery.appendChild(card);\n        });\n\n        const lightbox = new SimpleLightbox('#gallery a', {\n          captions: true,\n          captionsData: 'alt',\n          captionDelay: 250,\n          captionPosition: 'bottom',\n          history: false,\n          animationSpeed: 250,\n          close: true,\n        });\n        lightbox.refresh();\n      }\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  });\n});\n\nconst fetchPostsBtn = document.querySelector('.content-btn');\n\n// Controls the group number\nlet page = 1;\n// Controls the number of items in the group\nlet limit = 15;\n// In our case total number of pages is calculated on frontend\nconst totalPages = Math.ceil(110 / limit);\n\ncontentBtn.addEventListener('click', async () => {\n  // Check the end of the collection to display an alert\n  if (page > totalPages) {\n    return iziToast.error({\n      message: \"We're sorry, there are no more posts to load\",\n    });\n  }\n\n  try {\n    const posts = await addContent();\n    // Increase the group number\n    page += 1;\n\n    // Replace button text after first request\n    if (page > 1) {\n      contentBtn.textContent = 'Load more';\n    }\n  } catch (error) {\n    console.log(error);\n  }\n});\n"],"names":["searchForm","searchBar","gallery","loading","searchQuery","iziToast","url","page","limit","data","axios","image","card","SimpleLightbox","error","totalPages","posts"],"mappings":"owBAOA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,MAAMA,EAAa,SAAS,cAAc,OAAO,EAC3CC,EAAY,SAAS,eAAe,YAAY,EACpC,SAAS,cAAc,aAAa,EACtD,MAAMC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAU,SAAS,cAAc,UAAU,EAEjDH,EAAW,iBAAiB,SAAU,MAAM,GAAK,CAC/C,EAAE,eAAc,EAEhB,MAAMI,EAAcH,EAAU,MAAM,KAAI,EAExC,GAAI,CAACG,EAAa,CAChBC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8BACjB,CAAO,EACD,MACD,CAEDF,EAAQ,MAAM,QAAU,QAGxB,MAAMG,EAAM,qEAA4CF,CAAW,iEAAiEG,CAAI,aAAaC,CAAK,GAE1J,GAAI,CAEF,MAAMC,GADW,MAAMC,EAAM,IAAIJ,CAAG,GACd,KAEtBH,EAAQ,MAAM,QAAU,OACpBM,EAAK,KAAK,SAAW,GACvBJ,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACZ,CAAS,EACDH,EAAQ,UAAY,KAEpBA,EAAQ,UAAY,GACpBO,EAAK,KAAK,QAAQE,GAAS,CACzB,MAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAY,OACjBA,EAAK,UAAY;AAAA,eACZD,EAAM,aAAa;AAAA,kBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,6BAG3BA,EAAM,IAAI;AAAA;AAAA,sCAEDA,EAAM,KAAK;AAAA,sCACXA,EAAM,KAAK;AAAA,yCACRA,EAAM,QAAQ;AAAA,0CACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAI/CT,EAAQ,YAAYU,CAAI,CAClC,CAAS,EAEgB,IAAIC,EAAe,aAAc,CAChD,SAAU,GACV,aAAc,MACd,aAAc,IACd,gBAAiB,SACjB,QAAS,GACT,eAAgB,IAChB,MAAO,EACjB,CAAS,EACQ,QAAO,EAEnB,OAAQC,EAAO,CACd,QAAQ,MAAM,SAAUA,CAAK,CAC9B,CACL,CAAG,CACH,CAAC,EAEqB,SAAS,cAAc,cAAc,EAG3D,IAAIP,EAAO,EAEPC,EAAQ,GAEZ,MAAMO,EAAa,KAAK,KAAK,IAAMP,CAAK,EAExC,WAAW,iBAAiB,QAAS,SAAY,CAE/C,GAAID,EAAOQ,EACT,OAAOV,EAAS,MAAM,CACpB,QAAS,8CACf,CAAK,EAGH,GAAI,CACF,MAAMW,EAAQ,MAAM,aAEpBT,GAAQ,EAGJA,EAAO,IACT,WAAW,YAAc,YAE5B,OAAQO,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAAC"}